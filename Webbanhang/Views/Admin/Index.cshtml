@using System.Data
@model IEnumerable<Webbanhang.Models.DatHang>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/_LayoutAdmin.cshtml";
}

<h2>Danh sach nhan vien</h2>

<div class="right_col" role="main">
    <div class="">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="x_title">
                        <h2>Quản lý đơn hàng</h2>

                        <ul class="nav navbar-right panel_toolbox">
                            <li class="dropdown">
                                <a href="#" class="btn btn-primary" onclick="themdonhang()">Thêm đơn hàng</a>

                            </li>
                            <li>
                                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                            </li>

                            <li>
                                <a class="close-link"><i class="fa fa-close"></i></a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">

                        <table id="datatable-checkbox" class="table table-striped table-bordered bulk_action">
                            <thead>
                                <tr>

                                    <th><input type="checkbox" id="check-all" class="flat"></th>
                                    <th>Họ tên</th>
                                    <th>Email</th>
                                    <th>Điện thoại</th>
                                    <th>Địa chỉ</th>
                                    <th>Ngày đặt</th>
                                    <th>Tổng tiền</th>
                                    <th></th>
                                    <th></th>
                                    <th></th>
                                </tr>
                            </thead>

                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr>

                                        <td>
                                            <input type="checkbox" id="check-all" class="flat" />
                                        </td>
                                        <td>@item.Hoten</td>
                                        <td>@item.Email</td>
                                        <td>@item.Phone</td>
                                        <td>@item.Diachi</td>
                                        <td>@item.Ngaydat</td>
                                        <td>@item.Tongtien</td>
                                        
                                        <td><a class="btn btn-info" href="/Home/getCTDHByDH/@item.MaDH"><i class="glyphicon glyphicon-eye-open"></i></a></td>

                                        <td><a class="btn btn-warning"><i class="glyphicon glyphicon-pencil"></i></a></td>
                                        <td><a class="btn btn-danger" href="#"><i class="glyphicon glyphicon-trash"></i></a></td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- The Modal -->
<div class="modal" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title" id="titlethem">Thêm nhân viên</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">

                <form id="demo-form2" method="post" enctype="multipart/form-data" action="/Home/addNhanVien" data-parsley-validate class="form-horizontal form-label-left">
                    <input type="hidden" id="aoe" name="aoe" value="0" />
                    <div class="form-group" id="anhienma">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                            Mã NV <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="text" id="manv" name="manv" required="required" class="form-control col-md-7 col-xs-12">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                            Tên NV <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="text" id="tennv" name="tennv" required="required" class="form-control col-md-7 col-xs-12">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">
                            Ngày Sinh <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input id="ns" name="ns" class="date-picker form-control col-md-7 col-xs-12" required="required" type="text">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                            Địa chỉ <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="text" id="diachi" name="diachi" required="required" class="form-control col-md-7 col-xs-12">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Mã Phòng</label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="text" id="maphong" name="maphong" required="required" class="form-control col-md-7 col-xs-12">
                        </div>

                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">
                            Ngày Nhập <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input id="nn" name="nn" class="date-picker form-control col-md-7 col-xs-12" required="required" type="text">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                            Ảnh <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="file" id="anh" name="anh" class="form-control col-md-7 col-xs-12">
                        </div>
                    </div>

                    <div class="ln_solid"></div>
                    <div class="form-group">
                        <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">

                            @*<button type="submit" class="btn btn-success" id="btnThem" onclick="themnhanvien(@item.MaNV,@item.TenNV,@item.NgaySinh,@item.DiaChi,@item.MaPhong,@item.NgayNhap,@item.Anh)">Thêm</button>*@
                            <button type="submit" class="btn btn-success">Lưu</button>

                            <button class="btn btn-primary" type="reset">Làm mới</button>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>

        </div>
    </div>
</div>


<div class="modal fade" id="viewone">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal">&times;</button>
                <h3 class="modal-title">View du lieu</h3>
            </div>
            <div class="modal-body">

                <form id="demo-form2" method="get" enctype="multipart/form-data" action="" data-parsley-validate class="form-horizontal form-label-left">

                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                            Mã ĐH
                        </label>
                        <label class="control-label col-sm-6" id="vmadh">

                        </label>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                            Tên SP
                        </label>
                        <label class="control-label col-sm-6 " id="vtensp">

                        </label>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                            Ảnh
                        </label>
                        <label class="control-label col-sm-6" id="vanh">

                        </label>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                            Số lượng
                        </label>
                        <label class="control-label col-sm-6" id="vsl">

                        </label>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                            Giá
                        </label>
                        <label class="control-label col-sm-6" id="vgia">

                        </label>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                            Giảm giá
                        </label>
                        <label class="control-label col-sm-6" id="vgg">

                        </label>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                            Tổng tiền
                        </label>
                        <label class="control-label col-sm-6" id="vtt">

                        </label>
                    </div>
                   
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
    function view1donhang(id) {
        $.get("/Home/getCTDHByDH", { id: id }, function (data) {
            $.each(data, function (i, val) {
                //console.log(data);
                $("#vmadh").html(val.);
                $("#vtensp").html(data.TenNV);
                $("#vanh").html(data.NgaySinh);
                $("#vsl").html(data.DiaChi);
                $("#vgia").html(data.MaPhong);
                $("#vgg").html(data.NgayNhap);
                $("#vtt").html(data.Anh);
            });
        });
        $("#viewone").modal("show");
    }
    function viewctdh(id){
        $.get("/Home/getCTDHByDH",{id:id},function (data){
            $.each(data,function(i,val){
                $("vmadh").html()
            })
        })
    }

    function sua(id) {
        $("#titlethem").html("Sửa nhân viên");
        $.get("/Home/getOneNV", { id: id }, function (data) {
            //console.log(data);
            $("#manv").val(data.MaNV);
            $("#tennv").val(data.TenNV);
            $("#ns").val(data.NgaySinh);
            $("#diachi").val(data.DiaChi);
            $("#maphong").val(data.MaPhong);
            $("#nn").val(data.NgayNhap);
            $("#aoe").val("0");
            $("#anhienma").hide();
        });
        $("#myModal").modal("show");
        $("#btnThem").hide();
    }
    function themnhanvien() {
        $("#titlethem").html("Thêm nhân viên");
        $("#manv").val("");
        $("#tennv").val("");
        $("#ns").val("");
        $("#diachi").val("");
        $("#maphong").val("");
        $("#nn").val("");
        $("#aoe").val("1");
        $("#anhienma").show();
        $("#myModal").modal("show");
    }
</script>
